<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <script src="//cdn.jsdelivr.net/npm/leancloud-storage@4.8.1/dist/av-min.js"></script>
    <link rel="stylesheet" href="style.css" /> 
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />

    <title>Danmaku Mode</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    
  </head>
  <style>
    body {background-color: powderblue;}
    h1   {color: blue;
        text-align: center;}
    video {
        align-items: center;
        justify-content: center;
        display: flex;
        height: auto;
        width: max-content;
    }
    </style>
  <body>
    <div class="container">
        <div>
        <h1 class="title">Interactive Learning Classroom</h1>
        </div>

        <div id="box" class="box">
        
        <video vid="lecture1" src="assets/Firstclass.mp4" controls></video>
        </div>
        <form>
        <fieldset>
                <legend>Your Danmakus</legend>
            <input type="text" id="txt" />

        </fieldset>
        </form>
        <button onclick="send()" >Submit</button> 
        <script>
        
      //  import Filter from './Filter.js';
          //  danmaku = [];
            var word1 = $('txt').value;
            const { Query, User } = AV;
            
           // console.log(word1,"gte")
                function $(str) {
                return document.getElementById(str);
                }
                function send() {
                    console.log($('txt').value,"gte")
                var word = $('txt').value;
                var span = document.createElement('span');
                var top = 145 + parseInt(Math.random() * 300);
                var color1 = parseInt(Math.random() * 256);
                var color2 = parseInt(Math.random() * 256);
                var color3 = parseInt(Math.random() * 256);
                var color = "rgb(" + color1 + "," + color2 + "," + color3 + ")";
                top = top < 0 ? 0 : top;
                span.style.position = 'absolute';
                span.style.top = top + "px";
                span.style.color = color;
                span.style.left = '700px';
                span.style.fontSize = '45px';
                span.style.whiteSpace = 'nowrap';
                var nub = (Math.random() * 10) + 1;
                span.setAttribute('speed', nub);
                span.speed = nub;
                span.innerHTML = word;
                $('box').appendChild(span);
                $('txt').value = "";
               // danmaku.push($('txt').value);
                 //Post the data into the lean cloud
                /*fetch('https://HspftATL.api.lncldglobal.com/1.1/classes/content', {
                    method: 'POST',
                    headers: {
                        'X-LC-Id': 'HspftATLprWndYJMnb7veqTz-MdYXbMMI',
                        'X-LC-Key': '636J7uKrOdDRoiYjz6lpIjCD,master',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({"content":word})
                });*/
            }
                setInterval(move, 200);
                    function move() {
                    var spanArray = $('box').children;
                    for (var i = 0; i < spanArray.length; i++) {
                    spanArray[i].style.left =
                    parseInt(spanArray[i].style.left) - spanArray[i].speed + 'px';
                    }
                }

                /*fetch('https://HspftATL.api.lncldglobal.com/1.1/classes/content', {
                    headers: {
                        'X-LC-Id': 'HspftATLprWndYJMnb7veqTz-MdYXbMMI',
                        'X-LC-Key': 'lwFT7yRJSzNSHKhwBy4O46Qa',
                        'Content-Type': 'application/json'
                    }
                }).then(response => response.json())
                .then(data => show(data));*/

                // api url 
                const api_url =  
                'https://HspftATL.api.lncldglobal.com/1.1/classes/content'; 
                
                // Defining async function 
                async function getapi(url) { 
                    
                    // Storing response 
                    const response = await fetch(url, {
                    headers: {
                        'X-LC-Id': 'HspftATLprWndYJMnb7veqTz-MdYXbMMI',
                        'X-LC-Key': 'lwFT7yRJSzNSHKhwBy4O46Qa',
                        'Content-Type': 'application/json'
                    }
                    }); 
                    
                    // Storing data in form of JSON 
                    var data = await response.json(); 
                    console.log(data,"123"); 
                    if (response) { 
                        hideloader(); 
                    } 
                    show(data); 
                } 
                // Calling that async function 
                getapi(api_url); 
                
                // Function to hide the loader 
                function hideloader() { 
                    document.getElementById('loading').style.display = 'none'; 
                } 
    
                function show(data) { 
                    console.log(typeof(data),"h");
                    let tab =  
                        `<tr> 
                        <th>DanmakuContent</th> 
                        <th>DanmakuNumberofLikes</th> 
                        <th>DanmakuDate</th> 
                        </tr>`; 
                    for (let r of Object.keys(data)) { 
                        console.log(r,"r")
                       // console.log(typeof(data),"h")
                        for (let j of (Object.keys(data[r]))) { 
                            console.log(j,"j")
                        // var a = Object.keys(data[r])[0]
                            //console.log(typeof(Object.keys(object2[r])[0]))
                        //  if a == number {console.log("ha")}
                            var a = data[r][j];
                            console.log(a["content"],"a")
                            tab += `<tr>  
                                    <td>${a["content"]} </td> 
                                    <td>${a["number"]} </td> 
                                    <td>${a["createdAt"]} </td> 
                                </tr>`;
                        }
                    }
                    document.getElementById("Danmakus").innerHTML = tab;  
                }
                        //for (let k of (Object.keys(data[r][j]))) { 
                             
                           /* if (k == "content")
                            {
                               // console.log(k,"k")
                                var b = Object.values(data[r][j]["content"])
                            //console.log(b,"hello")
                            tab += `<tr>  
                                    <td>${b} </td> 
                                </tr>`; }
                                {
                               
                            var b1 = Object.values(data[r][j])
                            //console.log(b,"hello")
                            tab += `<tr>  
                                    <td>${b1} </td> 
                                </tr>`; }/
                            
                            
                            

                            
                            }
                        }   
                    }
                    document.getElementById("Danmakus").innerHTML = tab; 
                }
                    
                    // Loop to access all rows  
                    /*for (let r of Object.keys(object2)) { 
                        for (let j of Object.keys(object2[r])) { 
                            var a = object2[r][j];
                            console.log(r,a)
                            tab +=  `<tr>  
                            <td>${r} </td> 
                            <td>${a} </td> 
                        </tr>`; }
                        }
                    // Setting innerHTML as tab variable 
                    document.getElementById("Danmakus").innerHTML = tab;  
                }*/
              
            


        </script>
       
        <!--    //Get the data from the cloud
            /*fetch('https://HspftATL.api.lncldglobal.com/1.1/classes/content', {
                    headers: {
                        'X-LC-Id': 'HspftATLprWndYJMnb7veqTz-MdYXbMMI',
                        'X-LC-Key': 'lwFT7yRJSzNSHKhwBy4O46Qa',
                        'Content-Type': 'application/json'
                    }
                }).then(response => response.json())
                   .then(data => console.log(data,"hi"));*/


                  /* async function getapi() { 
    
                    // Storing response 
                    const response = await fetch('https://HspftATL.api.lncldglobal.com/1.1/classes/content', {
                    headers: {
                        'X-LC-Id': 'HspftATLprWndYJMnb7veqTz-MdYXbMMI',
                        'X-LC-Key': 'lwFT7yRJSzNSHKhwBy4O46Qa',
                        'Content-Type': 'application/json'
                    }
                }); 
                    
                    // Storing data in form of JSON 
                    var data = await response.json(); 
                    console.log(data); 
                    if (response) { 
                        //hideloader(); 
                    } 
                    show(data); 
                } 
                // Calling that async function 
                getapi(); */

            
           
             // Function to define innerHTML for HTML table 
             /*function show(data) { 
                    let tab =  
                        `<tr> 
                        <th>Number</th> 
                        <th>Content</th> 
                        <th>ObjectId</th> 
                        <th>UpdatedAt</th> 
                        </tr>`; 
                    
                    // Loop to access all rows  
                    for (let r of data.list) { 
                        tab += `<tr>  
                    <td>${r.number} </td> 
                    <td>${r.content}</td> 
                    <td>${r.objectId}</td>  
                    <td>${r.updatedAt}</td>           
                </tr>`; 
                    } 
                    // Setting innerHTML as tab variable 
                    document.getElementById("Danmakus").innerHTML = tab;  
                }*/
                
                
            /*function getapi() { 
              
                    show(data); 
                } 
                // Calling that function 
                getapi(); */
              // Defining async function 
              /*function getapi() { 
                    
                    // Storing response 
                    const response = fetch('https://HspftATL.api.lncldglobal.com/1.1/classes/content', {
                    headers: {
                        'X-LC-Id': 'HspftATLprWndYJMnb7veqTz-MdYXbMMI',
                        'X-LC-Key': 'lwFT7yRJSzNSHKhwBy4O46Qa',
                        'Content-Type': 'application/json'
                    }
                });
                    
                    // Storing data in form of JSON 
                    var data = response.json(); 
                    console.log(data,"hu"); 
                    if (response) { 
                        hideloader(); 
                    } 
                    show(data); 
                    
                
                // Function to hide the loader 
                function hideloader() { 
                    document.getElementById('loading').style.display = 'none'; 
                } 
                    
                /*fetch('assets/danmaku.json')
                                .then(response => {
                return response.json();
                })
                .then(data => {
                console.log(data);
                    Filter(data);
                });
                
                
            
-->
                      
       
     <!--    <div class="d-flex justify-content-center"> 
            <div class="spinner-border" 
                 role="status" id="loading"> 
                <span class="sr-only">Loading...</span> 
            </div> 
        </div> 
        <h1>Danmakus</h1> 
       //table for showing data
        <table id="danmaku"></table> 
        <div>

            <h1 class="title">Chat Area</h1>
            <div class="search">
                <input type="search" name='danmaku' placeholder="Search Danmakus...">
                <p> </p>
            </div>
        <div>
            </div> -->
       
            <div class> 
                <div class 
                     role="status" id="loading"> 
                    <span class>Loading...</span> 
                </div> 
            </div> 
            <h1>Danmakus</h1> 
            <!-- table for showing data -->
            <table id="Danmakus"></table> 
    
    <a href="index.html"><Button onclick="myFunction()" classes={{root: classes.root}}variant="contained" color="primary" size="large">
        <img src="assets/Home.png" height=44px width=44px alt="Question"/>
       
            </Button></a>
    

  </body>
  </html>